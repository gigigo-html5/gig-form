<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-form/iron-form.html">

<dom-module id="gig-form">

    <template>

        <form id="form"
            is="iron-form"
            action="[[action]]"
            autocomplete="[[autocomplete]]"
            method="[[method]]"
            target="[[target]]"
            type="[[type]]"
            iron-form-invalid="invalidHandler"
            novalidate>
            <content id="c"></content>
        </form>

    </template>

    <script>
        (function() {

            var self;

            Polymer({
                is: 'gig-form',
                listeners: {
                    'iron-form-invalid' : 'invalidHandler',
                    'iron-form-element-register' : 'addElement'
                },
                invalidHandler: function() {
                    this.validateFields();


                },
                validateFields: function() {
                    for (var el, i = 0; el = this.elementsForm[i], i < this.elementsForm.length; i++) {
                        if (el.required && !el.value) {
                            el.errorMessage = 'Campo obligatorio';
                        } else {
                            el.errorMessage = null;
                        }

                        console.log(el);
                    }

                },
                addElement: function(e) {
                    e.target._parentForm = this;
                    this.elementsForm.push(e.target);
                },
                properties: {
                    elementsForm: {
                        type: Array,
                        value: function() { return [] },
                        notify: true
                    }
                }
            })
        })();
    </script>

</dom-module>
